services:
  github-runner:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        RUNNER_VERSION: "2.329.0"
    restart: unless-stopped
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - GITHUB_REPOSITORY=${GITHUB_REPOSITORY}
      - RUNNER_SCOPE=${RUNNER_SCOPE:-repo}
      - RUNNER_PREFIX=${RUNNER_PREFIX:-}
      - USE_GLM=${USE_GLM:-false}
      - ZAI_API_KEY=${ZAI_API_KEY:-}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    deploy:
      replicas: 5
