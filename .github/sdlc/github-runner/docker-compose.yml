services:
  github-runner:
    image: ${PROJECT_NAME:-investbot}-github-runner
    build:
      context: .
      dockerfile: Dockerfile
    env_file:
      - .env
    restart: unless-stopped
    deploy:
      replicas: ${RUNNER_REPLICATIONS:-5}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - runner-workspace:/home/runner/_work

volumes:
  runner-workspace:
